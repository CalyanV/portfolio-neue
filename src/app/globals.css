@import "tailwindcss";
@plugin "tailwindcss-animate";
@plugin "@tailwindcss/typography";

/* ===== BASE LAYER - DESIGN TOKENS ===== */
@layer base {
  /* Light Mode (Default) */
  :root {
    --background: hsl(48.0000 20.0000% 95.0980%);
    --foreground: hsl(48 19.6078% 20%);
    --card: hsl(48 33.3333% 97.0588%);
    --card-foreground: hsl(60 2.5641% 7.6471%);
    --popover: hsl(0 0% 100%);
    --popover-foreground: hsl(50.7692 19.4030% 13.1373%);
    --primary: hsl(182.7451 93.8650% 31.9608%);
    --primary-foreground: hsl(0 0% 100%);
    --secondary: hsl(46.1538 22.8070% 88.8235%);
    --secondary-foreground: hsl(50.7692 8.4967% 30.0000%);
    --muted: hsl(44.0000 29.4118% 90%);
    --muted-foreground: hsl(50.0000 2.3622% 50.1961%);
    --accent: hsl(24.8780 100.0000% 91.9608%);
    --accent-foreground: hsl(13.0435 93.2432% 29.0196%);
    --destructive: hsl(0 84.2365% 60.1961%);
    --destructive-foreground: hsl(0 0% 100%);
    --border: hsl(50 7.5000% 84.3137%);
    --input: hsl(50.7692 7.9755% 68.0392%);
    --ring: hsl(177.5000 100% 37.6471%);
    --chart-1: hsl(13.2000 76.5306% 61.5686%);
    --chart-2: hsl(177.5000 100% 37.6471%);
    --chart-3: hsl(46.1538 28.2609% 81.9608%);
    --chart-4: hsl(248.0357 60.8696% 63.9216%);
    --chart-5: hsl(17.7778 60% 44.1176%);
    --sidebar: hsl(48.0000 20.0000% 95.0980%);
    --sidebar-foreground: hsl(60 2.5210% 23.3333%);
    --sidebar-primary: hsl(182.7451 93.8650% 31.9608%);
    --sidebar-primary-foreground: hsl(0 0% 100%);
    --sidebar-accent: hsl(24.8780 100.0000% 91.9608%);
    --sidebar-accent-foreground: hsl(13.0435 93.2432% 29.0196%);
    --sidebar-border: hsl(0 0% 92.1569%);
    --sidebar-ring: hsl(0 0% 70.9804%);
    --font-sans: Lato, ui-sans-serif, sans-serif, system-ui;
    --font-serif: serif;
    --font-mono: monospace;
    --radius: 1rem;
    --shadow-x: 0px;
    --shadow-y: 4px;
    --shadow-blur: 6.5px;
    --shadow-spread: 0px;
    --shadow-opacity: 0.03;
    --shadow-color: #000000;
    --shadow-2xs: 0px 4px 6.5px 0px hsl(0 0% 0% / 0.01);
    --shadow-xs: 0px 4px 6.5px 0px hsl(0 0% 0% / 0.01);
    --shadow-sm: 0px 4px 6.5px 0px hsl(0 0% 0% / 0.03), 0px 1px 2px -1px hsl(0 0% 0% / 0.03);
    --shadow: 0px 4px 6.5px 0px hsl(0 0% 0% / 0.03), 0px 1px 2px -1px hsl(0 0% 0% / 0.03);
    --shadow-md: 0px 4px 6.5px 0px hsl(0 0% 0% / 0.03), 0px 2px 4px -1px hsl(0 0% 0% / 0.03);
    --shadow-lg: 0px 4px 6.5px 0px hsl(0 0% 0% / 0.03), 0px 4px 6px -1px hsl(0 0% 0% / 0.03);
    --shadow-xl: 0px 4px 6.5px 0px hsl(0 0% 0% / 0.03), 0px 8px 10px -1px hsl(0 0% 0% / 0.03);
    --shadow-2xl: 0px 4px 6.5px 0px hsl(0 0% 0% / 0.07);
    --tracking-normal: 0em;
    --spacing: 0.3rem;
  }

  /* Dark Mode */
  .dark {
    --background: hsl(60 1.2987% 15.0980%);
    --foreground: hsl(46.1538 9.7744% 73.9216%);
    --card: hsl(60 1.0309% 19.0196%);
    --card-foreground: hsl(48 33.3333% 97.0588%);
    --popover: hsl(60 2.1277% 18.4314%);
    --popover-foreground: hsl(60 5.4545% 89.2157%);
    --primary: hsl(182.7451 93.8650% 31.9608%);
    --primary-foreground: hsl(0 0% 100%);
    --secondary: hsl(60 1.7544% 22.3529%);
    --secondary-foreground: hsl(60 5.4545% 89.2157%);
    --muted: hsl(60 3.8462% 10.1961%);
    --muted-foreground: hsl(51.4286 8.8608% 69.0196%);
    --accent: hsl(8.5714 7.2165% 19.0196%);
    --accent-foreground: hsl(24.8780 100.0000% 91.9608%);
    --destructive: hsl(0 84.2365% 60.1961%);
    --destructive-foreground: hsl(0 0% 100%);
    --border: hsl(60 5.0847% 23.1373%);
    --input: hsl(52.5000 5.1282% 30.5882%);
    --ring: hsl(13.8889 78.2609% 72.9412%);
    --chart-1: hsl(13.8889 78.2609% 72.9412%);
    --chart-2: hsl(177.3913 100% 45.0980%);
    --chart-3: hsl(48 10.6383% 9.2157%);
    --chart-4: hsl(248.1250 42.8571% 43.9216%);
    --chart-5: hsl(17.7778 60% 44.1176%);
    --sidebar: hsl(30 3.3333% 11.7647%);
    --sidebar-foreground: hsl(46.1538 9.7744% 73.9216%);
    --sidebar-primary: hsl(182.7451 93.8650% 31.9608%);
    --sidebar-primary-foreground: hsl(0 0% 100%);
    --sidebar-accent: hsl(8.5714 7.2165% 19.0196%);
    --sidebar-accent-foreground: hsl(24.8780 100.0000% 91.9608%);
    --sidebar-border: hsl(0 0% 92.1569%);
    --sidebar-ring: hsl(0 0% 70.9804%);
    --font-sans: Lato, ui-sans-serif, sans-serif, system-ui;
    --font-serif: serif;
    --font-mono: monospace;
    --radius: 1rem;
    --shadow-x: 0px;
    --shadow-y: 4px;
    --shadow-blur: 6.5px;
    --shadow-spread: 0px;
    --shadow-opacity: 0.03;
    --shadow-color: #012b2d;
    --shadow-2xs: 0px 4px 6.5px 0px hsl(182.7273 95.6522% 9.0196% / 0.01);
    --shadow-xs: 0px 4px 6.5px 0px hsl(182.7273 95.6522% 9.0196% / 0.01);
    --shadow-sm: 0px 4px 6.5px 0px hsl(182.7273 95.6522% 9.0196% / 0.03), 0px 1px 2px -1px hsl(182.7273 95.6522% 9.0196% / 0.03);
    --shadow: 0px 4px 6.5px 0px hsl(182.7273 95.6522% 9.0196% / 0.03), 0px 1px 2px -1px hsl(182.7273 95.6522% 9.0196% / 0.03);
    --shadow-md: 0px 4px 6.5px 0px hsl(182.7273 95.6522% 9.0196% / 0.03), 0px 2px 4px -1px hsl(182.7273 95.6522% 9.0196% / 0.03);
    --shadow-lg: 0px 4px 6.5px 0px hsl(182.7273 95.6522% 9.0196% / 0.03), 0px 4px 6px -1px hsl(182.7273 95.6522% 9.0196% / 0.03);
    --shadow-xl: 0px 4px 6.5px 0px hsl(182.7273 95.6522% 9.0196% / 0.03), 0px 8px 10px -1px hsl(182.7273 95.6522% 9.0196% / 0.03);
    --shadow-2xl: 0px 4px 6.5px 0px hsl(182.7273 95.6522% 9.0196% / 0.07);
  }

  /* Base Element Styling */
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
  }

  /* Apply EB Garamond to all headings */
  h1, h2, h3, h4, h5, h6 {
    @apply font-garamond;
  }
}

/* ===== TAILWIND V4 THEME CONFIGURATION ===== */
@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);

  --font-sans: var(--font-lato), var(--font-sans);
  --font-mono: var(--font-mono);
  --font-serif: var(--font-serif);
  --font-garamond: var(--font-garamond), var(--font-serif);

  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);

  --shadow-2xs: var(--shadow-2xs);
  --shadow-xs: var(--shadow-xs);
  --shadow-sm: var(--shadow-sm);
  --shadow: var(--shadow);
  --shadow-md: var(--shadow-md);
  --shadow-lg: var(--shadow-lg);
  --shadow-xl: var(--shadow-xl);
  --shadow-2xl: var(--shadow-2xl);

  /* Animation Durations */
  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;
  --animate-spotlight: spotlight 2s ease 0.75s 1 forwards;
  --animate-shiny-text: shiny-text 8s infinite;
  --animate-orbit: orbit calc(var(--duration) * 1s) linear infinite;
}

/* ===== ANIMATION KEYFRAMES ===== */

/* Accordion animations */
@keyframes accordion-down {
  from {
    height: 0;
  }
  to {
    height: var(--radix-accordion-content-height);
  }
}

@keyframes accordion-up {
  from {
    height: var(--radix-accordion-content-height);
  }
  to {
    height: 0;
  }
}

/* Spotlight animation */
@keyframes spotlight {
  0% {
    opacity: 0;
    transform: translate(-72%, -62%) scale(0.5);
  }
  100% {
    opacity: 1;
    transform: translate(-50%, -40%) scale(1);
  }
}

/* Orbit animation */
@keyframes orbit {
  0% {
    transform: rotate(0deg) translateX(var(--radius)) rotateZ(calc(var(--angle) * -1deg)) rotateY(0deg);
  }
  100% {
    transform: rotate(360deg) translateX(var(--radius)) rotateZ(calc(var(--angle) * -1deg)) rotateY(0deg);
  }
}

/* Shiny text animation */
@keyframes shiny-text {
  0%,
  90%,
  100% {
    background-position: calc(-100% - var(--shiny-width)) 0;
  }
  30%,
  60% {
    background-position: calc(100% + var(--shiny-width)) 0;
  }
}

/* ===== CODE BLOCK STYLING ===== */

h3 code {
  @apply !text-lg md:!text-xl;
}

pre {
  @apply !px-0 rounded-lg overflow-x-auto py-4;
}

pre [data-line] {
  @apply px-4;
}

code {
  @apply text-sm md:text-base !leading-loose;
}

pre > code {
  counter-reset: line;
}

code[data-theme*=" "],
code[data-theme*=" "] span {
  color: var(--shiki-light);
  background-color: var(--shiki-light-bg);
}

@media (prefers-color-scheme: dark) {
  code[data-theme*=" "],
  code[data-theme*=" "] span {
    color: var(--shiki-dark);
    background-color: var(--shiki-dark-bg);
  }
}

code[data-line-numbers] {
  counter-reset: line;
}

code[data-line-numbers] > [data-line]::before {
  counter-increment: line;
  content: counter(line);
  @apply inline-block w-4 mr-4 text-right text-muted-foreground;
}

code {
  counter-reset: line;
}

code > [data-line]::before {
  counter-increment: line;
  content: counter(line);
  display: inline-block;
  width: 1rem;
  margin-right: 2rem;
  text-align: right;
  @apply text-muted-foreground;
}

code[data-line-numbers-max-digits="2"] > [data-line]::before {
  width: 2rem;
}

code[data-line-numbers-max-digits="3"] > [data-line]::before {
  width: 3rem;
}

/* ===== SPLINE 3D WATERMARK HIDING ===== */

/* Hide Spline watermark/logo */
.spline-wrapper #logo,
.spline-wrapper spline-viewer #logo,
.spline-wrapper .spline-watermark,
.spline-container > div > div:first-child:not(canvas),
.spline-container canvas + div,
.spline-container canvas ~ div {
  display: none !important;
  opacity: 0 !important;
  visibility: hidden !important;
  pointer-events: none !important;
}

/* More specific targeting for Spline UI elements */
spline-viewer {
  position: relative !important;
}

spline-viewer > div:not(canvas) {
  display: none !important;
}

/* ===== SMOOTH SCROLL LENIS CLASSES ===== */

html.lenis,
html.lenis body {
  height: auto;
}

.lenis.lenis-smooth {
  scroll-behavior: auto !important;
}

.lenis.lenis-smooth [data-lenis-prevent] {
  overscroll-behavior: contain;
}

.lenis.lenis-stopped {
  overflow: hidden;
}

.lenis.lenis-smooth iframe {
  pointer-events: none;
}
